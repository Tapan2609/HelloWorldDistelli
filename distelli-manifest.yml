tapan/HelloWorldDistelli:
  # This Basic Distelli Manifest assumes the following
  # has been provisioned on the destination deploy server:
  #
  # OS: Ubuntu
  # Installed Packages:
  #   Java JRE >= 1.7   [sudo apt-get install default-jre]
  #
  # Set the JAVA_HOME (below) for your JRE install directory
  #
  # This also requires that the Java JDK be installed on
  # the development server to compile the java code.
  #
  # There is a build.sh script to compile the code for you.
  #

  Env:
    - CLASSPATH: 'target/*:lib/*'
    #
    # Set the JAVA_HOME below for the destination
    # deployment server JRE directory.
    #
    - JAVA_HOME: "/usr/lib/jvm/java-8-oracle/jre"
    #
    # JVM_ARGS: '"-Duser.timezone=UTC -Xmx128M -Xms128M"'
    - PORT: "8001"
    # ARGS: "$PORT"

  Build:
    - mvn package

  # Exec:
  # - exec $JAVA_HOME/bin/java -cp $CLASSPATH $JVM_ARGS HelloWorldDistelli $ARGS

  PkgInclude:
    - target/*.jar
    - lib/*.jar


  PostInstall:
    - echo "PostStart"
    - publicip=$(curl -s ident.me)
    - echo "Public IP $publicip"
    #'sudo cp -f ./target/*.war $CATALINA_HOME/webapps/'
    # By default tomcat detects if the war file has changed and
    # automatically extracts it. If restart is required you can
    # restart tomcat with the command below.
    # Restart Tomcat - You might have to use a different command
    # depending on how tomcat is installed
    # sudo service tomcat8 restart
    - 'echo "You can validate the install by pointing your browser at http://$publicip:$PORT/HelloWorldDistelli"'